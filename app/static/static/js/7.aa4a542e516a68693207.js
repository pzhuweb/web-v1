webpackJsonp([7],{"Jb/O":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Q0Ca"),i={name:"achievement",data:function(){var e=this;return{loading:!1,columns:[{title:"作者",key:"username"},{title:"发表时间",key:"post_time",render:function(e,t){return e("div",a.a.timeFormat(t.row.post_time))}},{title:"成就描述",key:"description"},{title:"删除",key:"action",width:150,align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.delAchievement(e.achievementData[n.index].id,n.index)}}},"删除")])}}],achievementData:[],tagData:[],tagColor:["blue","green","red","yellow"]}},created:function(){this.sellectAllTag(),this.selectAllAchievement()},methods:{selectAllAchievement:function(){var e=this;this.$http.get("/achievement/achievementInfo").then(function(t){e.achievementData=t.data.msg}).catch(function(t){e.$Message.error("出错啦！")})},sellectAllTag:function(){var e=this;this.$http.get("/achievement/selectAllTag").then(function(t){e.tagData=t.data.msg}).catch(function(t){e.$Message.error("出错啦")})},deletTag:function(e,t){var n=this;this.$Modal.confirm({content:"<p>确定删除吗</p>",onOk:function(){n.$http.post("/achievement/delTag",{tagId:n.tagData[t].achievement_num}).then(function(e){n.$Modal.remove(),n.$Message.info("删除成功！"),n.tagData.splice(t,1)}).catch(function(e){his.$Modal.remove(),n.$Message.error("删除失败！")})},onCancel:function(){n.$Message.info("Clicked cancel")}})},handleAdd:function(){var e=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.value,autofocus:!0,placeholder:"请输入新的分类名称"},on:{input:function(t){e.value=t}}})},loading:!0,onOk:function(){null==e.value?(e.$Modal.remove(),e.$Message.error("分类名不能为空！")):e.$http.post("/achievement/addTag",{tagName:e.value}).then(function(t){e.$Modal.remove(),e.sellectAllTag(),e.$Message.info("添加成功！"),e.value=""}).catch(function(t){e.$Modal.remove(),e.$Message.error("添加失败！")})},onCancel:function(){e.value=""}})},delAchievement:function(e,t){var n=this;this.$http.post("/achievement/delAchievement",{achievementId:e}).then(function(e){n.achievementData.splice(t,1),n.$Message.info("删除成功！")}).catch(function(e){n.$Message.info("出错啦！")})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"achievement"},[n("Card",{staticClass:"tagTitle"},[e._l(e.tagData,function(t,a){return n("Tag",{key:a,staticClass:"tag",attrs:{type:"border",color:e.tagColor[a%4],name:a,closable:""},on:{"on-close":e.deletTag}},[e._v("\n        "+e._s(t.name)+"\n    ")])}),n("br"),e._v(" "),n("Button",{staticClass:"add",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:e.handleAdd}},[e._v("添加分类")])],2),e._v(" "),n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n          成就列表\n      ")]),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("Table",{attrs:{loading:e.loading,columns:e.columns,data:e.achievementData,stripe:""}})],1)])],1)},staticRenderFns:[]};var c=n("Z0/y")(i,o,!1,function(e){n("jMy6")},"data-v-4bfe6fce",null);t.default=c.exports},jMy6:function(e,t){}});
//# sourceMappingURL=7.aa4a542e516a68693207.js.map