webpackJsonp([8],{EMkD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"members",data:function(){var e=this;return{loading:!1,columns:[{title:"姓名",key:"username",render:function(e,t){return e("div",[e("Icon",{props:{type:"person"}}),e("strong",t.row.username)])}},{title:"学号",key:"student_num"},{title:"学院",key:"depart_name",render:function(e,t){return t.row.depart_name?e("div",""+t.row.depart_name):e("div","未完善")}},{title:"专业",key:"major_name",render:function(e,t){return t.row.depart_name?e("div",""+t.row.major_name):e("div","未完善")}},{title:"操作",key:"action",width:150,align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.delUser(n.row.student_num)}}},"踢出成员")])}}],allMembers:[],reserch_type:[],tagType:"",tagColor:["blue","green","red","yellow"]}},created:function(){this.sellectAllMembers(),this.sellectAllReserch()},methods:{sellectAllReserch:function(){var e=this;this.$http.get("/members/selectAllSearch").then(function(t){e.reserch_type=t.data.msg}).catch(function(t){e.$Message.error("出错啦。。。")})},sellectAllMembers:function(){var e=this;this.$http.get("/members/selectAllMembers").then(function(t){e.allMembers=t.data.msg}).catch(function(t){e.$Message.error("出错啦。。。")})},delUser:function(e){var t=this;this.$http.get("/user/deluser",{params:{studentNum:e}}).then(function(e){t.$Message.info("删除成功！"),t.sellectAllMembers()}).catch(function(e){t.$Message.error("出错啦。。。")})},deletTag:function(e,t){var n=this;this.$Modal.confirm({content:"<p>确定删除吗</p>",onOk:function(){n.$http.post("/members/reserchDel",{reserchNum:n.reserch_type[t].reserch_num}).then(function(e){n.$Modal.remove(),n.$Message.info("删除成功！"),n.sellectAllReserch()}).catch(function(e){his.$Modal.remove(),n.$Message.error("删除失败！")})},onCancel:function(){n.$Message.info("取消成功！")}})},handleAdd:function(){var e=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.value,autofocus:!0,placeholder:"请输入新的研究方向名称"},on:{input:function(t){e.value=t}}})},loading:!0,onOk:function(){null==e.value?(e.$Modal.remove(),e.$Message.error("内容不能为空！")):e.$http.post("/members/reserchAdd",{reserchName:e.value}).then(function(t){e.$Modal.remove(),e.sellectAllReserch(),e.$Message.info("添加成功！"),e.value=""}).catch(function(t){e.$Modal.remove(),e.$Message.error("添加失败！")})},onCancel:function(){e.value=""}})},changeTag:function(e){var t=this;this.loading=!0,this.$http.get("/members/selectByTag",{params:{reserchNum:e}}).then(function(e){t.loading=!1,t.allMembers=e.data.msg}).catch(function(e){t.loading=!1,t.$Message.error("出错啦。。。")})}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"members"}},[n("Card",{staticClass:"tagTitle"},[n("p",{attrs:{slot:"title"},slot:"title"},[e._v("研究分类")]),e._v(" "),e._l(e.reserch_type,function(t,r){return n("Tag",{key:r,staticClass:"tag",attrs:{type:"border",color:e.tagColor[r%4],name:r,closable:""},on:{"on-close":e.deletTag}},[e._v("\n              "+e._s(t.reserch_name)+"\n          ")])}),n("br"),e._v(" "),n("Button",{staticClass:"add",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:e.handleAdd}},[e._v("添加分类")])],2),e._v(" "),n("Card",[e._v("\n          成员分类查询：           \n          "),n("Select",{staticStyle:{width:"200px"},on:{"on-change":e.changeTag},model:{value:e.tagType,callback:function(t){e.tagType=t},expression:"tagType"}},e._l(e.reserch_type,function(t){return n("Option",{key:t.reserch_num,attrs:{value:t.reserch_num}},[e._v("\n                  "+e._s(t.reserch_name)+"\n              ")])}),1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("Table",{attrs:{loading:e.loading,columns:e.columns,data:e.allMembers,stripe:""}})],1)],1)},staticRenderFns:[]};var a=n("VU/8")(r,s,!1,function(e){n("TAxj")},"data-v-3ae4c5f8",null);t.default=a.exports},TAxj:function(e,t){}});
//# sourceMappingURL=8.fb4e0280433a614ea1a6.js.map